{"_path":"/dodock/installation/plus/installation-rhel-8-9","_dir":"plus","_draft":false,"_partial":false,"_locale":"fr","title":"Installation sur RHEL","description":"Guide de configuration complet d'un serveur Dokos sur plateformes Redhat et clones","body":{"type":"root","children":[{"type":"element","tag":"community-tutorial-notice","props":{},"children":[]},{"type":"element","tag":"h1","props":{"id":"installation-de-dokos-sur-plateformes-rhel-centos-almalinux-rockylinux-8-et-9"},"children":[{"type":"text","value":"Installation de Dokos sur plateformes RHEL (CentOS, AlmaLinux, RockyLinux) 8 et 9"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ce guide explique comment installer Dokos v2 ou v3 sur les plateformes Redhat (RHEL, AlmaLinux, CentOS, RockyLinux) EL8 ou EL9."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Bien qu'en dehors du scope du présent document, il convient de préparer le système hôte pour l'ERP Dokos comme suit:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Le chemin /var contiendra les fichiers de l'ERP, une partition dédiée est souhaitable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurer les éventuels guest tools s'il s'agit d'une machine virtuelle (VMWare, Qemu, HyperV...)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurer un serveur NTP de préférence intra-réseau"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurer la sécurité, les accès, ainsi que la traçabilité (voir guide sécurité dédié ainsi que guide OpenSCAP)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurer le tuning machine (voir guide dédié tuned-adm avec profil dédié NPF-APP et valeurs thread siblings)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Installer les outils de diagnostics habituels (net-tools bind-utils nano sysstat iotop htop iftop atop nmon telnet lsof traceroute) disponibles essentiellement sur le depot EPEL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurer la supervision (Prometheus ou SNMPd)"}]}]},{"type":"element","tag":"h2","props":{"id":"installation-des-prérequis"},"children":[{"type":"text","value":"Installation des prérequis"}]},{"type":"element","tag":"h3","props":{"id":"prérequis-standards"},"children":[{"type":"text","value":"Prérequis standards"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Installer les paquets permettant la compilation des modules yarn"}]},{"type":"element","tag":"pre","props":{"code":"dnf install -y git tar bzip2 openssl-devel libffi-devel gcc\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" bzip2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" openssl-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" libffi-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" gcc\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour la mise en production, il faudra en outre installer l'outil d'automatisation ansible:"}]},{"type":"element","tag":"pre","props":{"code":"# Pour RHEL 8 et clones\ndnf -y install ansible\n# Pour RHEL 9 et clones\ndnf -y install ansible-core\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 8 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" ansible\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 9 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" ansible-core\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"configuration-spécifique-du-système"},"children":[{"type":"text","value":"Configuration spécifique du système"}]},{"type":"element","tag":"h4","props":{"id":"modèle-inotify-mode-développement-uniquement"},"children":[{"type":"text","value":"Modèle Inotify (mode développement uniquement)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lors de l'exécution de Dokos en mode développement, le kernel hook inotify est utilisé par le framework JS pour surveiller les changements de fichiers. Par défaut, la limite de fichiers que RHEL 8 surveille est fixé à 8192 pour des raisons de performances, et les logs du framework peuvent contenir des erreurs de type"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"UnhandledPromiseRejectionWarning: Error: ENOSPC: System limit for number of file watchers reached, watch '/var/dokos/dokos-erp/apps/frappe/frappe/public/scss/common/quill.scss' 23:53:21 watch.1     |   at FSWatcher.<computed> (internal/fs/watchers.js:243:19)"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour un environnement de développement, il est possible de lever cette limite comme suit:"}]},{"type":"element","tag":"pre","props":{"code":"echo \"fs.inotify.max_user_watches=$((1024*512))\" | sudo tee -a /etc/sysctl.d/90-dokos.conf\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"fs.inotify.max_user_watches="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"$(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":"512"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"))\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" tee"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /etc/sysctl.d/90-dokos.conf\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Chaque fichier surveillé consomme 1Ko de mémoire, dans notre exemple, pour surveiller 512Ko fichiers, il faudra 512Mo de mémoire vive."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dans un environnement de production, il faut penser à vider les caches de fichiers précédents de nodejs afin de réduire cette quantité de fichiers à surveiller."}]},{"type":"element","tag":"h4","props":{"id":"mémoire-vm"},"children":[{"type":"text","value":"Mémoire VM"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Afin d'éviter que les enregistrements en tâche de fond échouent si la mémoire vive est faible:"}]},{"type":"element","tag":"pre","props":{"code":"echo \"vm.overcommit_memory=1\" | sudo tee -a /etc/sysctl.d/90-dokos.conf\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"vm.overcommit_memory=1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" tee"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /etc/sysctl.d/90-dokos.conf\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"tcp-backlog"},"children":[{"type":"text","value":"TCP Backlog"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour optimiser les performances de redis, il faudra modifier le paramètre suivant:"}]},{"type":"element","tag":"pre","props":{"code":"echo \"net.core.somaxconn=65535\" | sudo tee -a /etc/sysctl.d/90-dokos.conf\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"net.core.somaxconn=65535"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" tee"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /etc/sysctl.d/90-dokos.conf\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"chargement-paramètres"},"children":[{"type":"text","value":"Chargement paramètres"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il faudra recharger les paramètres à la volée pour une application sans attendre le redémarrage."}]},{"type":"element","tag":"pre","props":{"code":"sysctl --load /etc/sysctl.d/90-dokos.conf\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"sysctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --load"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /etc/sysctl.d/90-dokos.conf\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"désactivation-des-transparent-huge-pages-thp-via-le-mode-opt-in-par-processus-en-utilisant-la-directive-madvise"},"children":[{"type":"text","value":"Désactivation des Transparent Huge Pages (THP) via le mode opt-in par processus en utilisant la directive « madvise »"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il faudra changer les arguments kernel dans /etc/default/grub comme suit en ajoutant « transparent_hugepage=madvise ». Exemple:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"pre","props":{"code":"GRUB_CMDLINE_LINUX=\"crashkernel=auto resume=UUID=598eec09-15a8-4cc9-b1ed-17d2b41b5594 transparent_hugepage=madvise\"\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"crashkernel=auto resume=UUID=598eec09-15a8-4cc9-b1ed-17d2b41b5594 transparent_hugepage=madvise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Une fois enregistré, il faudra recréer une configuration de boot"}]},{"type":"element","tag":"pre","props":{"code":"find /boot -iname \"grub.cfg\" | xargs grub2-mkconfig -o\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /boot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -iname"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"grub.cfg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" xargs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" grub2-mkconfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -o\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"préparation-du-service-de-base-de-données-mysql"},"children":[{"type":"text","value":"Préparation du service de base de données MySQL"}]},{"type":"element","tag":"h4","props":{"id":"installation-et-préparation-de-la-base-de-données-mariadb"},"children":[{"type":"text","value":"Installation et préparation de la base de données MariaDB"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"S'assurer que la version de MariaDB soit >= 10.3.x via la commande suivante:"}]},{"type":"element","tag":"pre","props":{"code":"dnf list mariadb-server\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" list"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" mariadb-server\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lancer l'installation via la commandes suivantes:"}]},{"type":"element","tag":"pre","props":{"code":"# Pour RHEL 8 et clones\ndnf -y install mariadb-server mariadb-devel\n# Pour RHEL 9 et clones\ndnf -y install mariadb-server\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 8 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" mariadb-server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" mariadb-devel\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 9 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" mariadb-server\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"configuration-du-serveur-et-du-client"},"children":[{"type":"text","value":"Configuration du serveur et du client"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ajouter les directives suivantes dans la section "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[mysql]"}]},{"type":"text","value":" du fichier "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/my.cnf.d/mariadb-server.cnf"}]}]},{"type":"element","tag":"pre","props":{"code":"# NETPERFECT-BZ012: Optimisation des performances mono serveur\ntable_cache             = 1000\n# NETPERFECT-BZ131: Permet l'import de fichiers SQL disposant de INSERT statements trop longs (ERROR 2006 (HY000) at line 696: MySQL server has gone away)\nmax_allowed_packet      = 128M\n# NETPERFECT-BZ065: Augmenter la taille du fichier log INNODB pour permetttre de jouer de plus grandes requêtes (info: MySQL server has gone away.). Additional info: https://jira.kopano.io/browse/KC-1053\ninnodb_log_file_size    = 128M\n# NETPERFECT-BZ213: Augmenter la durée maximale d'absence de requête pour éviter l'erreur (MySQL server has gone away)\nwait_timeout            = 288000\n# NETPERFECT-BZ003: Chaque table INNODB doit posséder son propre fichier afin de faciliter la récuperation de données en cas de crash\ninnodb-file-per-table   = 1\n\n# NETPERFECT-BZ401: Do not set client handshake (dokos)\ncharacter-set-client-handshake = FALSE\n# NETPERFECT-BZ232: Set default collation for most applications\ncharacter-set-server           = utf8mb4\n# NETPERFECT-BZ232: Set default collation for most applications\ncollation-server               = utf8mb4_unicode_ci\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ012: Optimisation des performances mono serveur\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"table_cache"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"             ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":" 1000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ131: Permet l'import de fichiers SQL disposant de INSERT statements trop longs (ERROR 2006 (HY000) at line 696: MySQL server has gone away)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"max_allowed_packet"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"      ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" 128M\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ065: Augmenter la taille du fichier log INNODB pour permetttre de jouer de plus grandes requêtes (info: MySQL server has gone away.). Additional info: https://jira.kopano.io/browse/KC-1053\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"innodb_log_file_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"    ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" 128M\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ213: Augmenter la durée maximale d'absence de requête pour éviter l'erreur (MySQL server has gone away)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"wait_timeout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"            ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":" 288000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ003: Chaque table INNODB doit posséder son propre fichier afin de faciliter la récuperation de données en cas de crash\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"innodb-file-per-table"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"   ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":" 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ401: Do not set client handshake (dokos)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"character-set-client-handshake"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" FALSE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ232: Set default collation for most applications\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"character-set-server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"           ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" utf8mb4\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# NETPERFECT-BZ232: Set default collation for most applications\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"collation-server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"               ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" utf8mb4_unicode_ci\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ajouter les directives suivantes dans la section "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[mysql]"}]},{"type":"text","value":" du fichier "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"etc/my.cnf.d/mysql-clients.cnf"}]}]},{"type":"element","tag":"pre","props":{"code":"NETPERFECT-BZ232: Set default collation for most applications\ndefault-character-set = utf8mb4\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"NETPERFECT-BZ232:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" Set"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" collation"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" most"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" applications\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"default-character-set"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" utf8mb4\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Une fois configuré, vous pourrez lancer le service MariaDB avec la commande suivante"}]},{"type":"element","tag":"pre","props":{"code":"systemctl enable --now mariadb\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" enable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --now"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" mariadb\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"la configuration de sécurité se fera en lançant la commande"}]},{"type":"element","tag":"pre","props":{"code":"mariadb-secure-installation\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"mariadb-secure-installation\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La configuration est légèrement différente entre RHEL 8 et RHEL 9. Depuis RHEL 9, les connexions en tant qu'utilisateur root sont possibles sans mot de passe en utilisant un socket unix."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sous RHEL 8, il faudra ajouter un fichier de mot de passe afin d'arriver à un résultat identique."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Créer le fichier "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/root/.my.cnf"}]},{"type":"text","value":" suivant"}]},{"type":"element","tag":"pre","props":{"code":"[client]\npassword=\"VotreMotDePasseSuperSécuriséMySQL\"\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"VotreMotDePasseSuperSécuriséMySQL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"préparation-de-la-base-de-données-redis"},"children":[{"type":"text","value":"Préparation de la base de données redis"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depuis le Framework Frappe v13 (dokos v2.x), le prérequis minimal est redis 6.x."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RHEL 8 est fourni avec redis 5.x par défaut et RHEL 9 est fourni avec redis 6.x par défaut."}]},{"type":"element","tag":"pre","props":{"code":"# Pour RHEL 8 et clones\ndnf module enable redis:6\ndnf install redis -y\n# Pour RHEL 9 et clones\ndnf install redis -y\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 8 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" enable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" redis:6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" redis"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 9 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" redis"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"préparation-de-lenvironnement-nodejs"},"children":[{"type":"text","value":"Préparation de l'environnement nodeJS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depuis le Framework Frappe v13 (dokos v2.x), le prérequis minimal est nodejs 14.x."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depuis le Framework Frappe v14 (dokos v3.x), le prérequis minimal est nodejs 16.x"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RHEL 8 est fourni avec nodejs 14.x par défaut et RHEL 9 est fourni avec nodejs 16.x par défaut."}]},{"type":"element","tag":"pre","props":{"code":"# Pour RHEL 8 et clones\ndnf module enable nodejs:14\ndnf install nodejs -y\n# Pour RHEL 9 et clones\ndnf install nodejs -y\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 8 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" enable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nodejs:14\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nodejs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 9 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nodejs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"installation-du-manager-de-packages-js-yarn"},"children":[{"type":"text","value":"Installation du manager de packages JS yarn"}]},{"type":"element","tag":"h4","props":{"id":"solution-dinstallation-en-tant-que-paquet-rpm"},"children":[{"type":"text","value":"Solution d'installation en tant que paquet RPM"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette solution à l'avantage de mettre à jour automatiquement yarn avec le système."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depuis le framework Frappe v13, le prérequis minimal est yarn 1.12."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Installation du dépôt yarn"}]},{"type":"element","tag":"pre","props":{"code":"curl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | tee /etc/yum.repos.d/yarn.repo\nrpm --import https://dl.yarnpkg.com/rpm/pubkey.gpg\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --silent"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --location"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" https://dl.yarnpkg.com/rpm/yarn.repo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" tee"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /etc/yum.repos.d/yarn.repo\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"rpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" https://dl.yarnpkg.com/rpm/pubkey.gpg\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Installation de yarn"}]},{"type":"element","tag":"pre","props":{"code":"dnf install -y yarn\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" yarn\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"solujtion-dinstallation-via-npm"},"children":[{"type":"text","value":"Solujtion d'installation via npm"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Alternativement, il est possible d'installer yarn via le gestionnaire de packages nodejs:"}]},{"type":"element","tag":"pre","props":{"code":"npm install -g yarn\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" yarn\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"préparation-de-lenvironnement-python"},"children":[{"type":"text","value":"Préparation de l'environnement Python"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depuis le Framework Frappe v13 (dokos v2.x), le prérequis minimal est python 3.8.x"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depuis le Framework Frappe v14 (dokos v3.x), le prérequis minimal est python 3.10.x"}]},{"type":"element","tag":"h4","props":{"id":"configuration-de-python-pour-dokos-v2x"},"children":[{"type":"text","value":"Configuration de python pour dokos v2.x"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RHEL 8 est fourni avec python 3.8. RHEL 9 est fourni avec python 3.9."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour dokos v2.x, il sera donc possible d'utiliser l'interpréteur système"}]},{"type":"element","tag":"pre","props":{"code":"dnf install -y python-pip\npython3 -m pip install --upgrade pip\npython3 -m pip install --upgrade setuptools wheel virtualenv\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" python-pip\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --upgrade"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" pip\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --upgrade"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" setuptools"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" wheel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" virtualenv\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"configuration-de-python-pour-dokos-v3x"},"children":[{"type":"text","value":"Configuration de python pour dokos v3.x"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dokos v3.x utilise python 3.10+. Au 12/12/2022, aucune dépot officiel de python 3.10 n'existe pour RHEL. Il faudra donc compiler manuellement Python et l'installer dans un chemin alternatif "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/usr/local/bin/python3"}]},{"type":"text","value":" pour ne pas interférer avec l'interpréteur python fourni par le système."}]},{"type":"element","tag":"pre","props":{"code":"# Dépendances de compilation python\ndnf install -y wget yum-utils make gcc openssl-devel bzip2-devel libffi-devel zlib-devel\n# Dépendances de compilation de modules python nécessaires pour le framework Frappe\ndnf install -y libpq-devel gcc-c++ libjpeg-turbo-devel libjpeg-turbo-utils\nmkdir /opt/python310 && cd /opt/python310\n# Attention: Vérifier sur python.org s'il existe une archive plus récente\ncurl -OL https://www.python.org/ftp/python/3.10.9/Python-3.10.9.tgz\ntar xvf Python-3.10.9.tgz\ncd Python-3.10.9\n./configure --with-system-ffi --with-computed-gotos --enable-loadable-sqlite-extensions\nmake -j ${nproc}\nmake altinstall\nalias python3=/usr/local/bin/python3\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Dépendances de compilation python\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" wget"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" yum-utils"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" make"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" gcc"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" openssl-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" bzip2-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" libffi-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" zlib-devel\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Dépendances de compilation de modules python nécessaires pour le framework Frappe\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" libpq-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" gcc-c++"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" libjpeg-turbo-devel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" libjpeg-turbo-utils\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /opt/python310"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /opt/python310\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Attention: Vérifier sur python.org s'il existe une archive plus récente\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -OL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" https://www.python.org/ftp/python/3.10.9/Python-3.10.9.tgz\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" xvf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" Python-3.10.9.tgz\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" Python-3.10.9\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"./configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --with-system-ffi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --with-computed-gotos"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --enable-loadable-sqlite-extensions\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -j"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" ${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"nproc"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" altinstall\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":"alias"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"/usr/local/bin/python3\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"installation-de-wkhtmltopdf"},"children":[{"type":"text","value":"Installation de wkhtmltopdf"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il faut se rendre sur la page « "},{"type":"element","tag":"a","props":{"href":"https://github.com/wkhtmltopdf/packaging/releases","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/wkhtmltopdf/packaging/releases"}]},{"type":"text","value":" pour télécharger la dernière version."}]},{"type":"element","tag":"pre","props":{"code":"# Pour RHEL 8 et clones\ncd /opt\ncurl -OL https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6.1-2/wkhtmltox-0.12.6.1-2.almalinux8.x86_64.rpm\ndnf localinstall wkhtmltox-0.12.6.1-2.almalinux8.x86_64.rpm\ndnf install nodejs -y\n# Pour RHEL 9 et clones\ncd /opt\ncurl -OL https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6.1-2/wkhtmltox-0.12.6.1-2.almalinux9.x86_64.rpm\ndnf localinstall wkhtmltox-0.12.6.1-2.almalinux9.x86_64.rpm\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 8 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /opt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -OL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6.1-2/wkhtmltox-0.12.6.1-2.almalinux8.x86_64.rpm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localinstall"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" wkhtmltox-0.12.6.1-2.almalinux8.x86_64.rpm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nodejs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Pour RHEL 9 et clones\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /opt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -OL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6.1-2/wkhtmltox-0.12.6.1-2.almalinux9.x86_64.rpm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localinstall"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" wkhtmltox-0.12.6.1-2.almalinux9.x86_64.rpm\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La version de wkhtmlpdf doit avoir été compilée avec le support de la librairie qt."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il est possible de vérifier que le patch QT soit appliqué avec la commande suivante"}]},{"type":"element","tag":"pre","props":{"code":"wkhtmltopdf -v 2>&1 | grep qt\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"wkhtmltopdf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -v"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" 2>&1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" grep"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" qt\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"wkhtmltopdf 0.12.6 (with patched qt)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Afin que les documents PDF générés par Dokos soient conformes à leur version HTML, il conviendra également d'installer les polices Truetype Microsoft avec la commande suivante:"}]},{"type":"element","tag":"pre","props":{"code":"dnf localinstall https://www.itzgeek.com/msttcore-fonts-2.0-3.noarch.rpm\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"dnf localinstall https://www.itzgeek.com/msttcore-fonts-2.0-3.noarch.rpm\n"}]}]},{"type":"element","tag":"h2","props":{"id":"installation-de-lerp-dokos"},"children":[{"type":"text","value":"Installation de l'ERP Dokos"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"L'ERP Dokos est un fork de erpnext, lui même basé sur le framework Frappe. Le framework Frappe s'administre avec l'outil "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench"}]},{"type":"text","value":" (aussi nommé "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"docli"}]},{"type":"text","value":" chez Dokos)."}]},{"type":"element","tag":"h3","props":{"id":"création-de-lutilisateur-dédié"},"children":[{"type":"text","value":"Création de l'utilisateur dédié"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Afin d'améliorer la sécurité, dokos devrait être installé en tant qu'utilisateur non root."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Création d'un utilisateur dédié dont le dossier utilisateur sera stocké dans /var/dokos"}]},{"type":"element","tag":"pre","props":{"code":"user-add --home-dir /var/dokos -G wheel dokos\n# Création d'un mot de passe pour l'utilisateur dokos\npasswd dokos\nsu - dokos\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"user-add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --home-dir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -G"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" wheel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Création d'un mot de passe pour l'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"passwd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"su"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"installation-du-framework-docli-frappe-bench"},"children":[{"type":"text","value":"Installation du Framework docli (Frappe Bench)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Afin que l'installation se déroule avec succès, il est conseillé de régler temporairement les variables linguistiques sur le standard C, afin que les scripts d'installations automatisés reçoivent des sorties standards des commandes telles que date sans se soucier de la langue."}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\nexport LC_ALL=C.UTF-8\ncd /var/dokos && sudo python3 -m pip install dokos-cli\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" LC_ALL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"C.UTF-8\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos-cli\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette opération installera une copie locale de "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"docli"}]},{"type":"text","value":" qui est un alias de "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench"}]}]},{"type":"element","tag":"h4","props":{"id":"création-dune-nouvelle-instance-dodock-frappe-framework"},"children":[{"type":"text","value":"Création d'une nouvelle instance Dodock (Frappe framework)"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos && docli init --frappe-branch master dokos-erp\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" init"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --frappe-branch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" master"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos-erp\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Le résultat devrait ressembler à ceci:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"$ /usr/local/bin/virtualenv --quiet env -p python3"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ /var/dokos/dokos-erp/env/bin/python -m pip install --quiet --upgrade pip"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nGetting dodock"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ git clone "},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/dodock.git","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/dodock.git"}]},{"type":"text","value":" --branch master --depth 1 --origin upstream"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nClonage dans 'dodock'..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Enumerating objects: 4828, done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Counting objects: 100% (4828/4828), done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Compressing objects: 100% (4556/4556), done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Total 4828 (delta 447), reused 2995 (delta 197), pack-reused 0"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRéception d'objets: 100% (4828/4828), 21.74 Mio | 13.96 Mio/s, fait."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRésolution des deltas: 100% (447/447), fait."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nInstalling frappe"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ /var/dokos/dokos-erp/env/bin/python -m pip install --quiet --upgrade -e /var/dokos/dokos-erp/apps/frappe"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ yarn install"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nyarn install v1.22.18"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[1/4] Resolving packages..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[2/4] Fetching packages..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[3/4] Linking dependencies..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nwarning \" > @fullcalendar/vue@5.10.1\" has incorrect peer dependency \"vue@^2.6.12\"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nwarning \" > bootstrap@4.5.0\" has unmet peer dependency \"jquery@1.9.1 - 3\"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nwarning \" > bootstrap@4.5.0\" has unmet peer dependency \"popper.js@^1.16.0\"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[4/4] Building fresh packages..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDone in 15.04s."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ bench build"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nyarn run v1.22.18"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ FRAPPE_ENV=production node rollup/build.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nclean: postcss.plugin was deprecated. Migration guide:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"https://evilmartians.com/chronicles/postcss-8-plugin-migration","rel":["nofollow"]},"children":[{"type":"text","value":"https://evilmartians.com/chronicles/postcss-8-plugin-migration"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nProduction mode"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/moment-bundle.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/libs.min.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Building frappe assets..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"✔ Built js/checkout.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/dialog.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/user_profile_controller.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/frappe-vue.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/bootstrap-4-web.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/barcode_scanner.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBrowserslist: caniuse-lite is outdated. Please run:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nnpx browserslist@latest --update-db"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBrowserslist: caniuse-lite is outdated. Please run next command `yarn upgrade caniuse-lite browserslist`"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/frappe-rtl.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/frappe-recorder.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/report.min.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/web_form.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/web_form.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/frappe-chat-web.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/report.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/data_import_tools.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/chat.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/frappe-web.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/desk.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/events-portal.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/list.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/printview.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/control.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/website-calendar.min.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/email.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/login.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/frappe-web-b4.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/form.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/desk.min.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✨  Done in 111.635s"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDone in 113.26s."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSUCCESS: Bench dokos-erp initialized"}]}]},{"type":"element","tag":"h4","props":{"id":"installation-des-dépendances-python-du-framework-frappe"},"children":[{"type":"text","value":"Installation des dépendances python du framework Frappe"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Au lieu d'une installation en tant que site-packages, les dépendances du framework Frappe seront installés directement dans l'environnement virtuel python crée pour le framework."}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\npython3 -m venv /var/dokos/dokos-erp/env\n/var/dokos/dokos-erp/env/bin/python -m pip install --upgrade -e /var/dokos/dokos-erp/apps/frappe\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" venv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/env\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"/var/dokos/dokos-erp/env/bin/python"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --upgrade"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/apps/frappe\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"installation-de-lapplication-erp-dokos"},"children":[{"type":"text","value":"Installation de l'application ERP dokos"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"UNe fois le framework configuré, il sera alors possible d'installer dokos comme suit"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && docli get-app --branch master https://gitlab.com/dokos/dokos\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" get-app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --branch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" master"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" https://gitlab.com/dokos/dokos\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La sortie devrait ressembler à ceci:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting dokos"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ git clone "},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/dokos","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/dokos"}]},{"type":"text","value":" --branch master --depth 1 --origin upstream"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nCloning into 'dokos'..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nwarning: redirecting to "},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/dokos.git/","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/dokos.git/"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Enumerating objects: 5773, done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Counting objects: 100% (5773/5773), done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Compressing objects: 100% (4740/4740), done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nremote: Total 5773 (delta 1454), reused 3419 (delta 796), pack-reused 0"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nReceiving objects: 100% (5773/5773), 17.10 MiB | 17.00 MiB/s, done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nResolving deltas: 100% (1454/1454), done."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nInstalling erpnext"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ /var/dokos/dokos-erp/env/bin/python -m pip install --quiet --upgrade -e /var/dokos/dokos-erp/apps/erpnext"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ yarn install"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nyarn install v1.22.18"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[1/4] Resolving packages..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[2/4] Fetching packages..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[3/4] Linking dependencies..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n[4/4] Building fresh packages..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDone in 1.53s."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ bench build --app erpnext"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nyarn run v1.22.18"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n$ FRAPPE_ENV=production node rollup/build.js --app erpnext"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nclean: postcss.plugin was deprecated. Migration guide:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"https://evilmartians.com/chronicles/postcss-8-plugin-migration","rel":["nofollow"]},"children":[{"type":"text","value":"https://evilmartians.com/chronicles/postcss-8-plugin-migration"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nProduction mode"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/moment-bundle.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/libs.min.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Building erpnext assets..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"✔ Built js/erpnext-web.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/item-dashboard.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/erpnext.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/portal-payments.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/point-of-sale.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBrowserslist: caniuse-lite is outdated. Please run:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nnpx browserslist@latest --update-db"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBrowserslist: caniuse-lite is outdated. Please run next command `yarn upgrade caniuse-lite browserslist`"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/erpnext-web.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built css/erpnext.css"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/bank-reconciliation.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/bank-transaction-importer.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/portal-calendars.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✔ Built js/resource-calendar.min.js"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n✨  Done in 38.242s"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDone in 39.81s."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: L'erreur suivante peut apparaître"}]},{"type":"element","tag":"pre","props":{"code":"ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts. frappe 2.13.0 requires PyJWT~=1.7.1, but you have pyjwt 2.3.0 which is incompatible.\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"ERROR:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"s dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts. frappe 2.13.0 requires PyJWT~=1.7.1, but you have pyjwt 2.3.0 which is incompatible.\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"création-dun-site"},"children":[{"type":"text","value":"Création d'un site"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Par défaut, l'application dokos installée sur le framework n'est pas accessible publiquement."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il convient de créer un site (nom de domaine) sur lequel le framework servira les applications qu'il héberge."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Le nom du site devra respecter la nomenclature DNS et pourra être un FQDN arbitraire (exemple: erp.masociete.local) ou un FQDN attaché à un nom de domaine existant (exemple: erp.monsite-societe.fr)"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && docli new-site <FQDN DE VORTE SITE>\ndocli --site <FQDN DE VOTRE SITE> set-config hostname http://<FQDN DE VOTRE SITE]\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" new-site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"FQDN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" VORTE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" SIT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"E"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"FQDN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" VOTRE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" SIT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"E"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" set-config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" hostname"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" http://"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"FQDN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" VOTRE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" SITE]\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dans le cas d'un FQDN arbitraire qui n'est pas résolu par un serveur DNS, il faudra ajouter les entrées suivantes au fichier "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/hosts"}]},{"type":"text","value":" permettant au serveur local de résoudre le nom du site"}]},{"type":"element","tag":"pre","props":{"code":"127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 <FQDN DE VOTRE SITE>\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6 <FQDN DE VOTRE SITE>\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"   localhost"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localhost.localdomain"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localhost4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localhost4.localdomain4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"FQDN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" VOTRE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" SIT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"E"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":":1         "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"localhost"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localhost.localdomain"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localhost6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" localhost6.localdomain6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"FQDN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" VOTRE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" SIT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"E"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La sortie de la commande de création de site devrait ressembler à ceci:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"MySQL root password:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Installing frappe..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUpdating DocTypes for frappe        : [========================================] 100%"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUpdating country info               : [========================================] 100%"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSet Administrator password:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRe-enter Administrator password:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n*** Scheduler is disabled ***"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nCurrent Site set to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<FQDN DE VOTRE SITE>"}]}]}]},{"type":"element","tag":"h4","props":{"id":"installation-de-lapplication-dokos-sur-le-site-crée"},"children":[{"type":"text","value":"Installation de l'application dokos sur le site crée"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && docli --site <FQDN DE VOTRE SITE> install-app dokos\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"FQDN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" VOTRE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" SIT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"E"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install-app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La sortie devrait ressembler à ceci:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Installing erpnext..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUpdating DocTypes for erpnext       : [========================================] 100%"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUpdating customizations for Address"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUpdating customizations for Contact"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUpdating customizations for Payment Gateway"}]}]},{"type":"element","tag":"h4","props":{"id":"fin-dinstallation"},"children":[{"type":"text","value":"Fin d'installation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"L'installation de l'ERP dokos est terminée et vous pouvez mettre fin à la session de l'utilisateur dokos."}]},{"type":"element","tag":"pre","props":{"code":"# Redevenir utilisateur root\nexit\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# Redevenir utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"exit\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A partir d'ici, vous pouvez tester dokos en mode développement ou alors configurer le serveur en mode production."}]},{"type":"element","tag":"h4","props":{"id":"optionnel-démarrage-du-framework-et-lensemble-des-sites-en-mode-développement"},"children":[{"type":"text","value":"Optionnel: Démarrage du framework et l'ensemble des sites en mode développement"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nsudo -u dokos \"cd /var/dokos/dokos-erp && docli start\"\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -u"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"cd /var/dokos/dokos-erp && docli start"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Remarque: Si les logs sont remplis d'erreurs de type "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ENOSPC"}]},{"type":"text","value":", il faudra vérifier la configuration du nombre de noeuds inotify (voir ci-dessus) et vérifier l'espace disque disponible."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dokos sera servi sur le port 8000. Il faudra donc configurer le parefeu."}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nfirewall-cmd --add-port=8000/tcp\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"firewall-cmd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --add-port=8000/tcp\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette commande ouvrira le port 8000 jusqu'au redémarrage du serveur. Si aucune mise en production aura lieu sur ce serveur, il sera possible de configurer de rendre cette configuration permanente"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nfirewall-cmd --runtime-to-permanent\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"firewall-cmd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --runtime-to-permanent\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"L'environnement dokos sera disponible à l'adresse "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://[IP-DU-SERVEUR]:8000"}]}]},{"type":"element","tag":"h2","props":{"id":"mise-en-production"},"children":[{"type":"text","value":"Mise en production"}]},{"type":"element","tag":"h3","props":{"id":"configuration-de-lenvironnement-de-production"},"children":[{"type":"text","value":"Configuration de l'environnement de production"}]},{"type":"element","tag":"h4","props":{"id":"ajout-des-dépendances-nécessaires-à-la-mise-en-production"},"children":[{"type":"text","value":"Ajout des dépendances nécessaires à la mise en production"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Le dépot EPEL est repuis pour fail2ban et supervisor."}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\ndnf install -y epel-release\ndnf install -y fail2ban nginx supervisor\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" epel-release\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" fail2ban"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nginx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" supervisor\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"droits-daccès"},"children":[{"type":"text","value":"Droits d'accès"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nchmod 750 /var/dokos\nusermod -aG dokos nginx\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":" 750"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -aG"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nginx\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"configuration-selinux"},"children":[{"type":"text","value":"Configuration SELinux"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Le système de production crée un lien symbolique du fchier nginx de configuration local vers le dossier de configuration nginx."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il est nécessaire de changer le contexte de sécurité SELinux pour autoriser le chargement de ce fichier par nginx hors du dossier /etc/nginx."}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nsemanage fcontext -a -t httpd_config_t /var/dokos/dokos-erp/config/nginx.conf\nrestorecon -Rv /var/dokos/dokos-erp/config/nginx.conf\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"semanage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" fcontext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" httpd_config_t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/config/nginx.conf\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"restorecon"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -Rv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/config/nginx.conf\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il faudra également autoriser nginx à se connecter à internet:"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nsetsebool -P httpd_can_network_connect 1\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"setsebool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -P"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" httpd_can_network_connect"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":" 1\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enfin, il faudra rendre le dossier sites lisible pour nginx:"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur root\nsite=[NOM SITE DOKOS]\nhttp_ro_content=(/var/dokos/dokos-erp/sites/assets /var/dokos/dokos-erp/apps/frappe/frappe/public /var/dokos/dokos-erp/apps/erpnext/erpnext/public /var/dokos/dokos-erp/apps/erpnext/node_modules /var/dokos/dokos-erp/apps/frappe/node_modules /var/dokos/dokos-erp/sites/$site/public)\nhttp_rw_content=(/var/dokos/dokos-erp/sites/$site/public/files /var/dokos/dokos-erp/sites/$site/private/files)\nfor path in ${http_ro_content[@]}; do semanage fcontext -a -t httpd_sys_content_t \"${path}(/.*)?\"; restorecon -Rv \"${path}\"; done\nfor path in ${http_rw_content[@]}; do semanage fcontext -a -t httpd_sys_rw_content_t \"${path}(/.*)?\"; restorecon -Rv \"{$path}\"; done\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur root\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"[NOM"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" SITE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" DOKOS]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"http_ro_content"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"=("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"/var/dokos/dokos-erp/sites/assets"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/apps/frappe/frappe/public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/apps/erpnext/erpnext/public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/apps/erpnext/node_modules"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/apps/frappe/node_modules"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/sites/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"/public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"http_rw_content"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"=("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"/var/dokos/dokos-erp/sites/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"/public/files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp/sites/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$site"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"/private/files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" ${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"http_ro_content"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"]};"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" do"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" semanage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" fcontext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" httpd_sys_content_t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"(/.*)?"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" restorecon"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -Rv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" done\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" ${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"http_rw_content"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"]};"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" do"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" semanage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" fcontext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" httpd_sys_rw_content_t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"(/.*)?"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" restorecon"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" -Rv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" done\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"setup-automatisé-production-dokos"},"children":[{"type":"text","value":"Setup automatisé production Dokos"}]},{"type":"element","tag":"h4","props":{"id":"choix-de-la-gestion-des-services"},"children":[{"type":"text","value":"Choix de la gestion des services"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Afin de vérifier la bonne exécution de l'ensemble des services, il faudra choisir entre utiliser des services systemd ou utiliser supervisord. Dans ce guide, nous utiliserons supervisord."}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && docli setup supervisor\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" supervisor\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"setup-de-production"},"children":[{"type":"text","value":"Setup de production"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: les patchs "},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/docli/-/merge_requests/2","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/docli/-/merge_requests/2"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/docli/-/merge_requests/3","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/docli/-/merge_requests/3"}]},{"type":"text","value":" et "},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/docli/-/merge_requests/4","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/docli/-/merge_requests/4"}]},{"type":"text","value":" doivent être intégrés."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"L'action suivante configurera supervisord et nginx:"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && sudo env \"PATH=$PATH\" docli setup production dokos\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"PATH="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$PATH"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" production"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" dokos\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"vérification"},"children":[{"type":"text","value":"Vérification"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Afin de vérifier que l'ensemble des processus nécessaires au fonctionnement de dokos sont actifs, il faudra exécuter les commandes suivantes:"}]},{"type":"element","tag":"pre","props":{"code":"supervisorctl status\nsystemctl status nginx\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"supervisorctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" status\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nginx\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"setup-services-supplémentaires"},"children":[{"type":"text","value":"Setup services supplémentaires"}]},{"type":"element","tag":"h4","props":{"id":"firewall"},"children":[{"type":"text","value":"Firewall"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour un serveur de production, il faudra ouvrir les ports HTTP et HTTPS de manière permanente:"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && sudo env \"PATH=$PATH\" docli setup firewall\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"PATH="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$PATH"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" firewall\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"fail2ban"},"children":[{"type":"text","value":"Fail2ban"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Fail2ban permettra de bannir une IP tentant une authentification par brute force"}]},{"type":"element","tag":"pre","props":{"code":"# En tant qu'utilisateur dokos\ncd /var/dokos/dokos-erp && sudo env \"PATH=$PATH\" docli setup fail2ban\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#546E7A;--shiki-dark:#676E95;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# En tant qu'utilisateur dokos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" /var/dokos/dokos-erp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"PATH="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"$PATH"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" docli"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" fail2ban\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"installation-des-prérequis","depth":2,"text":"Installation des prérequis","children":[{"id":"prérequis-standards","depth":3,"text":"Prérequis standards"},{"id":"configuration-spécifique-du-système","depth":3,"text":"Configuration spécifique du système"},{"id":"préparation-du-service-de-base-de-données-mysql","depth":3,"text":"Préparation du service de base de données MySQL"},{"id":"préparation-de-la-base-de-données-redis","depth":3,"text":"Préparation de la base de données redis"},{"id":"préparation-de-lenvironnement-nodejs","depth":3,"text":"Préparation de l'environnement nodeJS"},{"id":"installation-du-manager-de-packages-js-yarn","depth":3,"text":"Installation du manager de packages JS yarn"},{"id":"préparation-de-lenvironnement-python","depth":3,"text":"Préparation de l'environnement Python"},{"id":"installation-de-wkhtmltopdf","depth":3,"text":"Installation de wkhtmltopdf"}]},{"id":"installation-de-lerp-dokos","depth":2,"text":"Installation de l'ERP Dokos","children":[{"id":"création-de-lutilisateur-dédié","depth":3,"text":"Création de l'utilisateur dédié"},{"id":"installation-du-framework-docli-frappe-bench","depth":3,"text":"Installation du Framework docli (Frappe Bench)"}]},{"id":"mise-en-production","depth":2,"text":"Mise en production","children":[{"id":"configuration-de-lenvironnement-de-production","depth":3,"text":"Configuration de l'environnement de production"},{"id":"setup-automatisé-production-dokos","depth":3,"text":"Setup automatisé production Dokos"},{"id":"setup-services-supplémentaires","depth":3,"text":"Setup services supplémentaires"}]}]}},"_type":"markdown","_id":"content:3.dodock:11.installation:9.plus:5.installation-rhel-8-9.md","_source":"content","_file":"3.dodock/11.installation/9.plus/5.installation-rhel-8-9.md","_extension":"md"}