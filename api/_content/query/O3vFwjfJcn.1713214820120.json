{"_path":"/integrations/banks/bank-api","_dir":"banks","_draft":false,"_partial":false,"_locale":"fr","title":"Bank API","description":"Middleware pour connecter l'application Bank au fournisseur d'open-banking","icon":"i-fluent-building-bank-link-16-filled","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"bank-api"},"children":[{"type":"text","value":"Bank API"}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette application permet de faire le lien entre l'application Bank et les fournisseurs de solutions d'open-banking."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nElle doit √™tre un install√©e sur un site Dodock/Dokos distant et sert de passerelle pour les sites Dokos "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"clients"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Cette documentation est principalement √† destination des d√©veloppeurs souhaitant cr√©er des services autour de cette application"}]}]},{"type":"element","tag":"h2","props":{"id":"connexion"},"children":[{"type":"text","value":"Connexion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour vous connecter, il faut utiliser une combinaison cl√© priv√©/cl√© secr√®te qui doit √™tre pass√©e dans la requ√™te: "},{"type":"element","tag":"a","props":{"href":"/dodock/ressources/api/rest_api#authentification-par-jeton"},"children":[{"type":"text","value":"Documentation de l'API"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api_key"}]},{"type":"text","value":": Cl√© publique de connexion au site"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api_secret"}]},{"type":"text","value":": Cl√© priv√©e de connexion au site"}]}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Les cl√©s publiques et priv√©es peuvent √™tre obtenues en cr√©ant un utilisateur sur le site sur lequel est install√©e l'application "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Bank API"}]}]}]},{"type":"element","tag":"h2","props":{"id":"flux-de-connexion"},"children":[{"type":"text","value":"Flux de Connexion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ici "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Bank"}]},{"type":"text","value":" repr√©sente l'application "},{"type":"element","tag":"a","props":{"href":"/integrations/banks/bank"},"children":[{"type":"text","value":"Bank"}]},{"type":"text","value":" utilis√©e avec Dokos, mais peut √™tre remplac√©e par une application tierce."}]},{"type":"element","tag":"mermaid","props":{},"children":[{"type":"text","value":"\nsequenceDiagram\n    Bank->>Bank API: Demande de lien de connexion (get_bridge_connect_link)\n    Bank API->>Bridge: Demande de lien de connexion\n    Bank API->>Bank: Envoi du lien de connexion\n    Bank->>Bridge: Connexion √† la banque\n    Bridge-->>Bank API: Redirection apr√®s la connexion\n    Bank API-->>Bank: Redirection vers la page de d√©clenchement du flux\n    Bank API-->>Bank: Envoi d'un webhook de confirmation de validation du flux\n    Bank->>Bank API: R√©cup√©ration de l'identifiant d'Item envoy√© par Bridge pour stockage local\n"}]},{"type":"element","tag":"h2","props":{"id":"d√©marrer-avec-bank-api"},"children":[{"type":"text","value":"D√©marrer avec Bank API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour r√©cup√©rer des transactions bancaires associ√©es √† un compte bancaire, il faut mettre en place, a minima, le flux suivant:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"R√©cup√©rer un lien de connexion/authentification. L'authentification se passe sur le site du fournisseur Open-Banking."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nüëâ "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"get_bridge_connect_link"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dans certains cas, il faudra aussi obtenir des liens d'authentification "},{"type":"element","tag":"a","props":{"href":"https://docs.bridgeapi.io/docs/strong-customer-authentication","rel":["nofollow"]},"children":[{"type":"text","value":"SCA"}]},{"type":"text","value":" ou "},{"type":"element","tag":"a","props":{"href":"https://docs.bridgeapi.io/docs/business-accounts","rel":["nofollow"]},"children":[{"type":"text","value":"Pro"}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A la fin du flux d'authentification, enregistrer l'identifiant d'Item (terme Bridge pour d√©signer la banque)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"R√©cup√©rer tous les comptes bancaires associ√©s avec cet item"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nüëâ "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"get_bank_accounts"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"R√©cup√©rer les transactions associ√©es √† cet item"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nüëâ "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"get_bank_transactions"}]}]}]},{"type":"element","tag":"h2","props":{"id":"m√©thodes-dapi"},"children":[{"type":"text","value":"M√©thodes d'API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"L'ensemble des m√©thodes d'API ci-dessous peuvent √™tre appel√©es √† l'adresse:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://{URL_DU_SITE_BANK_API}/api/method/bank_api.bridge.{NOM_DE_LA_METHODE}"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bridge_connect_link"},"children":[{"type":"text","value":"get_bridge_connect_link"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet d'obtenir un lien d'authentification Bridge Connect."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bridge_connect_link"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_url"}]},{"type":"text","value":": URL de base du site demandeur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bank"}]},{"type":"text","value":": Nom de la banque concern√©e"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"redirect_url"}]},{"type":"text","value":": URL de redirection apr√®s la connexion avec la banque"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item, si connu"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"site"}]},{"type":"text","value":": Identifiant du site - Il s'agit d'une cl√© permettant d'identifier le site/client demandeur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"webhook_url"}]},{"type":"text","value":": URL √† laquelle envoyer des webhooks"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bridge_edit_link"},"children":[{"type":"text","value":"get_bridge_edit_link"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet d'obtenir un lien d'authentification Bridge Connect en mode "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Edition"}]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bridge_edit_link"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_url"}]},{"type":"text","value":": URL de base du site demandeur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bank"}]},{"type":"text","value":": Nom de la banque concern√©e"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"redirect_url"}]},{"type":"text","value":": URL de redirection apr√®s la connexion avec la banque"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"site"}]},{"type":"text","value":": Identifiant du site"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"webhook_url"}]},{"type":"text","value":": URL √† laquelle envoyer des webhooks"}]}]},{"type":"element","tag":"h4","props":{"id":"get_sca_authentication_link"},"children":[{"type":"text","value":"get_sca_authentication_link"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet d'obtenir un lien de rafra√Æchissement Strong Customer Authentication."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_sca_authentication_link"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_url"}]},{"type":"text","value":": URL de base du site demandeur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bank"}]},{"type":"text","value":": Nom de la banque concern√©e"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"redirect_url"}]},{"type":"text","value":": URL de redirection apr√®s la connexion avec la banque"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"site"}]},{"type":"text","value":": Identifiant du site"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"webhook_url"}]},{"type":"text","value":": URL √† laquelle envoyer des webhooks"}]}]},{"type":"element","tag":"h4","props":{"id":"get_pro_confirmation_link"},"children":[{"type":"text","value":"get_pro_confirmation_link"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet d'obtenir un lien de rafra√Æchissement Business accounts."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_pro_confirmation_link"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_url"}]},{"type":"text","value":": URL de base du site demandeur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bank"}]},{"type":"text","value":": Nom de la banque concern√©e"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"redirect_url"}]},{"type":"text","value":": URL de redirection apr√®s la connexion avec la banque"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item, si connu"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"site"}]},{"type":"text","value":": Identifiant du site"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"webhook_url"}]},{"type":"text","value":": URL √† laquelle envoyer des webhooks"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bridge_item_id"},"children":[{"type":"text","value":"get_bridge_item_id"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet d'obtenir l'identifiant de l'Item Bridge et le nom de la banque associ√©s √† une requ√™te d'authentification."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bridge_item_id"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":": Identifiant de la requ√™te de connexion"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bridge_item_details"},"children":[{"type":"text","value":"get_bridge_item_details"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet d'obtenir le document Bridge Item correspondant √† un identifiant."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bridge_item_details"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item"}]}]},{"type":"element","tag":"h4","props":{"id":"delete_bridge_item_id"},"children":[{"type":"text","value":"delete_bridge_item_id"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de supprimer un Item."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.delete_bridge_item_id"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]}]},{"type":"element","tag":"h4","props":{"id":"post_item_refresh"},"children":[{"type":"text","value":"post_item_refresh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de demander le rafra√Æchissement d'un Item."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.post_item_refresh"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bank_accounts"},"children":[{"type":"text","value":"get_bank_accounts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de r√©cup√©rer les comptes bancaires associ√©s √† un Item."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bank_accounts"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"item_id"}]},{"type":"text","value":": Identitiant de l'Item"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]}]},{"type":"element","tag":"h4","props":{"id":"get_single_bank"},"children":[{"type":"text","value":"get_single_bank"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de r√©cup√©rer le d√©tail d'une banque."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_single_bank"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bank_id"}]},{"type":"text","value":": Identitiant de l'Item"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bank_transactions_by_account"},"children":[{"type":"text","value":"get_bank_transactions_by_account"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de r√©cup√©rer les transactions associ√©es √† un compte bancaire."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bank_transactions_by_account"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"account_id"}]},{"type":"text","value":": Identitiant du compte bancaire."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]}]},{"type":"element","tag":"h4","props":{"id":"get_bank_transactions"},"children":[{"type":"text","value":"get_bank_transactions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de r√©cup√©rer les transactions bancaires associ√©es √† un Item."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_bank_transactions"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"since"}]},{"type":"text","value":": Date ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"format: yyyy-mm-dd"}]},{"type":"text","value":") de modifications des transactions la plus ancienne."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lang"}]},{"type":"text","value":": Langue de la demande. Les cat√©gories seront renvoy√©es dans cette langue"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":": ID d'utilisateur"}]}]},{"type":"element","tag":"h4","props":{"id":"get_category"},"children":[{"type":"text","value":"get_category"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette m√©thode permet de r√©cup√©rer le d√©tail d'une cat√©gorie Bridge."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"/api/method/bank_api.bridge.get_category"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lang"}]},{"type":"text","value":": Langue de la demande. Les cat√©gories seront renvoy√©es dans cette langue"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"category_id"}]},{"type":"text","value":": Identitiant de la cat√©gorie, si connu"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"connexion","depth":2,"text":"Connexion"},{"id":"flux-de-connexion","depth":2,"text":"Flux de Connexion"},{"id":"d√©marrer-avec-bank-api","depth":2,"text":"D√©marrer avec Bank API"},{"id":"m√©thodes-dapi","depth":2,"text":"M√©thodes d'API"}]}},"_type":"markdown","_id":"content:4.integrations:5.banks:bank-api.md","_source":"content","_file":"4.integrations/5.banks/bank-api.md","_extension":"md"}