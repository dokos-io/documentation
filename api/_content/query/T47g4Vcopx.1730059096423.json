{"_path":"/federation-lieux/lieux/application-dokos","_dir":"lieux","_draft":false,"_partial":false,"_locale":"fr","title":"Lieux utilisant Dokos","description":"Application support du Bagde Inter-Lieux pour les lieux utilisant Dokos","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"application-de-gestion-de-lieu-fédéré"},"children":[{"type":"text","value":"Application de gestion de lieu fédéré"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette application est publiée sous licence GPLv3 à l'adresse suivante:\n"},{"type":"element","tag":"a","props":{"href":"https://gitlab.com/dokos/federated-venue","rel":["nofollow"]},"children":[{"type":"text","value":"https://gitlab.com/dokos/federated-venue"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dans le cadre d'une fédération de lieu, une instance centrale permet l'enregistrement des entrées/sorties des utilisateurs d'un des lieux, ainsi que le lieu auquel il·elle est rattaché·e."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette application Dokos n'est pas obigatoire pour le fonctionnement de la fédération, mais permet à un lieu d'avoir le contrôle sur les éléments suivants:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Le paramétrage de la règle donnant accès à ses utilisateurs à la fédération."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"La synchronisation des entrées/sorties le concernant enregistrées dans l'instance centrale."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Si cette application n'est pas installée sur le site Dokos du lieu fournisseur d'accès, on considèrera que tous les utilisateurs sont autorisés à accéder à la fédération.\nLes entrées/sorties ne pourront pas non plus être récupérées sur le site du lieu concerné.\nCela ne bloque pas la participation à la fédération."}]}]},{"type":"element","tag":"h2","props":{"id":"règle-daccès-à-la-fédération"},"children":[{"type":"text","value":"Règle d'accès à la fédération"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lorsqu'un utilisateur arrive dans un autre lieu que son lieu de référence, il se connecte à la fédération via le site de son lieu de référence ("},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"lieu fournisseur"}]},{"type":"text","value":").\nCelui-ci va authentifier l'utilisateur via son identifiant/mot de passe.\nCependant celui ne garantie pas que l'utilisateur a les crédits suffisants pour participer à la fédération."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"L'instance centralisatrice va donc appeler l'API "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"federated_venue.api.user_access_to_federation"}]},{"type":"text","value":" et attendre une réponse ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Vrai\\Faux"}]},{"type":"text","value":") avant d'autoriser l'utilisateur à enregistrer ses entrées/sorties."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"En cas de réponse négative de l'API, l'accès sera refusé à l'utilisateur qui sera renvoyé sur une page d'erreur. Son entrée/sortie ne sera pas enregistrée."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Les règles d'accès standard et les options de configuration restent encore à définir."}]}]},{"type":"element","tag":"h2","props":{"id":"synchronisation-des-enregistrements"},"children":[{"type":"text","value":"Synchronisation des enregistrements"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A chaque enregistrement d'entrée/sortie dans l'instance centrale, un "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"webhook"}]},{"type":"text","value":" est déclenché et envoie immédiatement les informations associées aux sites "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"fournisseur"}]},{"type":"text","value":" et "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"client"}]},{"type":"text","value":" concernés."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La réception de ces informations va créer un nouveau document "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Enregistrement dans le lieu"}]}]},{"type":"element","tag":"callout","props":{"color":"amber","icon":"i-heroicons-exclamation-triangle"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Un mécanisme de vérification périodique de la synchronisation des enregistrements est prévu mais pas encore implémenté."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"règle-daccès-à-la-fédération","depth":2,"text":"Règle d'accès à la fédération"},{"id":"synchronisation-des-enregistrements","depth":2,"text":"Synchronisation des enregistrements"}]}},"_type":"markdown","_id":"content:5.federation-lieux:2.lieux:1.application-dokos.md","_source":"content","_file":"5.federation-lieux/2.lieux/1.application-dokos.md","_extension":"md"}