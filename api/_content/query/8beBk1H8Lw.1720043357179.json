{"_path":"/dodock/administration/mises-a-jour","_dir":"administration","_draft":false,"_partial":false,"_locale":"fr","title":"Mises à jour","description":"La mise à jour de Dokos est simple, mais peut demander des connaissance des Linux/Python/NodeJS en cas d'erreur.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mises-à-jour"},"children":[{"type":"text","value":"Mises à jour"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La mise à jour de Dokos est simple, mais peut demander des connaissance des Linux/Python/NodeJS en cas d'erreur."}]},{"type":"element","tag":"h2","props":{"id":"commande-principale"},"children":[{"type":"text","value":"Commande principale"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Allez dans votre dossier bench ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"home/{utilisateur}/{votre_bench}"}]},{"type":"text","value":") et lancez:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --restart-supervisor"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cette commande effectuera les actions suivantes:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mise à jour de vos applications avec la dernière version disponible sur Gitlab"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Bascule de votre application en mode maintenance"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mise à jour de votre environnement python avec toute nouvelle dépendance requise"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Lancement de tous les patches et migrations nécessaires à la mise à jour de votre base de données"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Consolidation de tous vos fichiers javascript et CSS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Bascule de votre application en mode normal"}]}]},{"type":"element","tag":"h2","props":{"id":"commandes-décomposées"},"children":[{"type":"text","value":"Commandes décomposées"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"La commande "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update"}]},{"type":"text","value":" peut se décompser en plusieurs commandes, qui sont :"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --pull"}]},{"type":"text","value":" récupérera seulement les derniers changements pour chaque application"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --patch"}]},{"type":"text","value":" lancera seulement les patches et migrations pour votre base de données"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --build"}]},{"type":"text","value":" consolidera seulement vos fichiers JS et CSS nécessaires à l'interface utilisateur"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --bench"}]},{"type":"text","value":" mettra à jour seulement l'application docli (Bench)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --requirements"}]},{"type":"text","value":" mettra à jour seulement les dépendances python et nodejs dans votre environnement"}]}]},{"type":"element","tag":"h2","props":{"id":"réinitialisation-des-répertoires-git"},"children":[{"type":"text","value":"Réinitialisation des répertoires git"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Si vous rencontrez une erreur lors de la mise à jour, car l'une de vos application rencontre un conflit "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"git"}]},{"type":"text","value":", vous pouvez utilisez la commande suivante pour le réinitialiser. Cela peut se produire lorsque votre site est en mode développement et que vous modifiez ou ajoutez des documents standards, par exemple."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update --reset --restart-supervisor"}]}]}]},{"type":"element","tag":"h2","props":{"id":"résolution-des-problèmes"},"children":[{"type":"text","value":"Résolution des problèmes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Si un patch tombe en erreur lors d'une mise à jour, veuillez publier un message sur le "},{"type":"element","tag":"a","props":{"href":"https://community.dokos.io","rel":["nofollow"]},"children":[{"type":"text","value":"forum communautaire"}]},{"type":"text","value":" avec une copie intégrale du message erreur. Attendez la correction, le cas échéant, et lancez de nouveau "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench update"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Si vous avez des applications personnalisées dans votre dossier bench, veuillez vous assurer qu'elles n'interférent pas avec le processus de mise à jour standard."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Avant de rapporter un problème potentiel, veuillez tester la mise à jour à nouveau dans un environnement sans application personnalisée."}]},{"type":"element","tag":"h2","props":{"id":"commandes-utiles"},"children":[{"type":"text","value":"Commandes utiles"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench set-maintenance-mode off"}]},{"type":"text","value":" désactive le mode maintenance"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pour désactiver totalement l'envoi d'emails et notifications, ainsi que les prélèvements automatiques :\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench set-config -g mute_emails 1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench set-config -g mute_payment_gateways 1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bench set-config -g mute_notifications 1"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"commande-principale","depth":2,"text":"Commande principale"},{"id":"commandes-décomposées","depth":2,"text":"Commandes décomposées"},{"id":"réinitialisation-des-répertoires-git","depth":2,"text":"Réinitialisation des répertoires git"},{"id":"résolution-des-problèmes","depth":2,"text":"Résolution des problèmes"},{"id":"commandes-utiles","depth":2,"text":"Commandes utiles"}]}},"_type":"markdown","_id":"content:3.dodock:12.administration:3.mises-a-jour.md","_source":"content","_file":"3.dodock/12.administration/3.mises-a-jour.md","_extension":"md"}